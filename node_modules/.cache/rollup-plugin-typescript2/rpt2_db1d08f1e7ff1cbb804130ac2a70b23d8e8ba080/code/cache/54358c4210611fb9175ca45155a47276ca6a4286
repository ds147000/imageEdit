{"code":"import { Scenes } from \"./dom/scenes\";\r\nimport { APP_CONFIG } from './config';\r\nvar App = /** @class */ (function () {\r\n    function App(className, config) {\r\n        var _this = this;\r\n        /**失败回调 */\r\n        this.onError = function (err) { };\r\n        /**成功回调 */\r\n        this.onSuccess = function (res) { };\r\n        this.Config = APP_CONFIG;\r\n        var body;\r\n        if (className) {\r\n            body = document.body.querySelector(className);\r\n        }\r\n        else {\r\n            body = document.body;\r\n        }\r\n        this.Config = Object.assign(this.Config, { cHeight: body.scrollHeight, cWidth: body.scrollWidth, width: body.scrollWidth, height: body.scrollHeight }, config);\r\n        this.Scenes = new Scenes(this.Config);\r\n        this.Scenes.onSuccess = function (res) { return _this.onSuccess(res); };\r\n        this.Scenes.onError = function (err) { return _this.onError(err); };\r\n        body.append(this.Scenes.$el);\r\n        this.mounted();\r\n    }\r\n    App.prototype.mounted = function () { };\r\n    App.prototype.destroy = function () {\r\n        var _this = this;\r\n        Object.keys(this).forEach(function (e) {\r\n            delete _this[e];\r\n        });\r\n    };\r\n    /**重置图像大小和位置 */\r\n    App.prototype.restart = function () {\r\n        this.Scenes.restart();\r\n    };\r\n    // 清空画布\r\n    App.prototype.clear = function () {\r\n        this.Scenes.clear();\r\n    };\r\n    /**\r\n     * 缩放图片\r\n     * @param value\r\n     */\r\n    App.prototype.zoom = function (value) {\r\n        this.Scenes.setZoom(value);\r\n    };\r\n    /**\r\n     * 旋转图片\r\n     * @param value\r\n     */\r\n    App.prototype.roate = function (value) {\r\n        this.Scenes.setRoate(value);\r\n    };\r\n    /**\r\n     * 移动图片\r\n     * @param x\r\n     * @param y\r\n     */\r\n    App.prototype.move = function (x, y) {\r\n        this.Scenes.moveImage(x, y);\r\n    };\r\n    /**\r\n     * 输入图片\r\n     * @param fileUrl\r\n     */\r\n    App.prototype.enterImage = function (fileUrl) {\r\n        this.Scenes.enterImage(fileUrl);\r\n    };\r\n    /**获取剪切图片base64 */\r\n    App.prototype.getDataURL = function () {\r\n        return this.Scenes.getDataURL();\r\n    };\r\n    /**获取剪切图片Bolb */\r\n    App.prototype.getBolb = function () {\r\n        var _this = this;\r\n        return new Promise(function (res, rej) {\r\n            _this.Scenes.getBolb(function (r) { return res(r); });\r\n        });\r\n    };\r\n    /**\r\n     * 获取剪切图片数据\r\n     * @param callbask\r\n     */\r\n    App.prototype.getData = function (callbask) {\r\n        return this.Config.output === 'base64' ? callbask(this.getDataURL()) : this.Scenes.getBolb(callbask);\r\n    };\r\n    return App;\r\n}());\r\nexport { App };\r\n","references":["/Users/yangzl/Desktop/gitStore/ImageEdit/src/dom/scenes.ts","/Users/yangzl/Desktop/gitStore/ImageEdit/src/config/index.ts"]}
